<!DOCTYPE html>
<html>

<head>
    <title>githubofjk Rock Paper Scissors</title>
    <meta charset="UTF-8" />
</head>

<body>
    <script>
        // computerPlay() randomly returns rock, paper, or scissor
        function computerPlay() {
            var hands = ['Rock', 'Paper', 'Scissors'];
            var hand = hands[Math.floor(Math.random() * hands.length)];
            return hand;
        }

        // Ensure input case insensitve
        function capitalize(input) {
            input = input.toLowerCase();
            let upper = input[0].toUpperCase();
            input = input.replace(input[0], upper);
            return input;
        }

        // Player plays one round of rock, paper, scissor vs computer
        function playRound(playerSelection, computerSelection) {
            playerSelection = capitalize(playerSelection);

            console.log("Player selected: " + playerSelection);
            console.log("Computer selects: " + computerSelection);

            let result;

            // tie
            if (playerSelection === computerSelection) {
                result = "Tie!";
            }
            // rock beats scissor
            else if (playerSelection === "Rock" && computerSelection === "Scissors") {
                result = "You Win! Rock beats Scissors";
            } else if (computerSelection === "Rock" && playerSelection === "Scissors") {
                result = "You Lose! Rock beats Scissors";
            }
            // paper beats rock
            else if (playerSelection === "Paper" && computerSelection === "Rock") {
                result = "You Win! Paper beats Rock";
            } else if (computerSelection === "Paper" && playerSelection === "Rock") {
                result = "You Lose! Paper beats Rock";
            }
            // scissor beats paper
            else if (playerSelection === "Scissors" && computerSelection === "Paper") {
                result = "You Win! Scissors beats Paper";
            } else {
                result = "You Lose! Scissors beats Paper";
            }

            return result;
        }

        // Play a 5 round game that keeps score and reports a winner or loser at the end
        function game() {
            let score = 0;
            let roundResult;
            let gameResult;

            console.log("First to 5 wins.");

            for (let i = 0; i < 5; i++) {
                // Prompt for user input and store in playerSelection
                let playerSelection = prompt("Player selection: ");
                let computerSelection = computerPlay();

                roundResult = playRound(playerSelection, computerSelection);

                // Display the results of each round
                console.log("Round " + (i + 1) + ": " + roundResult);

                // Update score
                if (roundResult.substr(4, 1) === "W") {
                    score++;
                } else if (roundResult.substr(4, 1) === "L") {
                    score--;
                }
            }

            if (score > 0) {
                gameResult = "Player Wins!";
            } else if (score === 0) {
                gameResult = "You Tied!";
            } else {
                gameResult = "Computer Wins!";
            }

            return gameResult;
        }

        console.log(game());
    </script>
</body>

</html>